<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Samal Abdikerimova, Ravi Donepudi, Carlos Salinas, and Xiran Yu" />


<title>US foreign aid since 1980</title>

<script src="index_files/header-attrs-2.1/header-attrs.js"></script>
<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<link href="index_files/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="index_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">US foreign aid since 1980</h1>
<h4 class="author">Samal Abdikerimova, Ravi Donepudi, Carlos Salinas, and Xiran Yu</h4>

</div>


<p>We will be using AidData’s data set <a href="1_Data/aiddata-countries-only.csv"><code>aiddata-countries-only.csv</code></a> to give an answer to some of the following questions</p>
<ol style="list-style-type: decimal">
<li>Which countries have seen the most US aid in the last 40 years?</li>
<li>What were the intended purposes of the aid?</li>
<li>How has the intended purpose changed over the years?</li>
</ol>
<p>First we need to import the data and filter it appropriately. The variable <code>donations_since_1980</code> holds donations committed by countries all countries since 1980, and of those <code>donations_usa</code> holds donations committed by the USA. (Note that we rename some of the accessors for ease of use.)</p>
<pre class="r"><code>aid_data &lt;- read_csv(&quot;1_Data/aiddata-countries-only.csv&quot;) %&gt;%
    rename(amount = commitment_amount_usd_constant,
           purpose = coalesced_purpose_name,
           p_code = coalesced_purpose_code)

aid_since_1980 &lt;- aid_data %&gt;% filter(year &gt;= 1980)

us_aid &lt;- aid_since_1980 %&gt;% filter(donor == &quot;United States&quot;)</code></pre>
<p>Now, let us look at the total foreign aid provided by the US (adjusted for inflation) within this 40 year period. The following code tries to fit a smooth curve to the data.</p>
<pre class="r"><code>us_aid %&gt;%
    group_by(year) %&gt;%
    summarize(total_aid = sum(amount)) %&gt;%
    ggplot() +
    geom_line(se = FALSE,
              mapping = aes(x = year, y = total_aid),
              color = &quot;red2&quot;) +
    labs(&quot;Total aid commited by the US to foreign countries since 1980 in USD&quot;) +
    ylab(&quot;total aid in billions of USD&quot;)</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## Warning: Ignoring unknown parameters: se</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Interesting. So foreign aid from the US has gone down markedly since the late 1990s. Next let us take a look at the top 10 recipients of foreign aid from the US in the last 40 years. First we will rank them by total amount of US aid received since 1980.</p>
<pre class="r"><code>names &lt;-
    us_aid %&gt;%
    group_by(recipient) %&gt;%
    summarize(total_us_aid = sum(amount)) %&gt;%
    arrange(desc(total_us_aid)) %&gt;%
    ungroup() %&gt;%
    slice(1:5) %&gt;%
    pull(recipient)

top_5_recipients &lt;- us_aid %&gt;% filter(recipient %in% names)

top_5_recipients %&gt;%
    group_by(recipient,year) %&gt;%
    summarize(total_aid = sum(amount)) %&gt;%
    ungroup() %&gt;%
    ggplot() +
    geom_line(se = FALSE,
              mapping = aes(x = year, y = total_aid, color = recipient)) +
    labs(title = &quot;Top 10 US aid recipients since 1980&quot;) +
    ylab(&quot;total aid in billions of USD&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Now let’s take a closer look at these countries and, specifically what US aid was used for. Let us take a look at how the US compares to other countries</p>
<pre class="r"><code>aid_donors &lt;- aid_data %&gt;%
    group_by(year,donor) %&gt;%
    summarize(total = sum(amount)) %&gt;%
    mutate(rank = rank(-total)) %&gt;%
    filter(rank &lt;= 5) %&gt;%
    mutate(total_lbl = round(total/1e6,2)) %&gt;%
    ungroup()

staticplot &lt;- aid_donors %&gt;%
    ggplot(aes(rank,
               group = donor,
               fill = as.factor(donor))) +
    geom_tile(aes(y = total/2,
                  height = total,
                  width = 0.9),
              alpha = 0.8,
              color = NA) +
    geom_text(aes(y = 0,
                  label = paste(donor, &quot; &quot;)),
              vjust = 0.2,
              hjust = 1) +
    geom_text(aes(y = total, label = total_lbl, hjust = 0)) +
    coord_flip(clip = &quot;off&quot;, expand = FALSE) +
    scale_y_continuous(labels = scales::comma) +
    scale_x_reverse() +
    guides(color = FALSE, fill = FALSE) +
    theme(axis.line=element_blank(),
          axis.text.x=element_blank(),
          axis.text.y=element_blank(),
          axis.ticks=element_blank(),
          axis.title.x=element_blank(),
          axis.title.y=element_blank(),
          legend.position=&quot;none&quot;,
          panel.background=element_blank(),
          panel.border=element_blank(),
          panel.grid.major=element_blank(),
          panel.grid.minor=element_blank(),
          panel.grid.major.x = element_line( size=.1, color=&quot;grey&quot; ),
          panel.grid.minor.x = element_line( size=.1, color=&quot;grey&quot; ),
          plot.title=element_text(size=25, hjust=0.5, face=&quot;bold&quot;, colour=&quot;grey&quot;, vjust=-1),
          plot.subtitle=element_text(size=18, hjust=0.5, face=&quot;italic&quot;, color=&quot;grey&quot;),
          plot.caption =element_text(size=8, hjust=0.5, face=&quot;italic&quot;, color=&quot;grey&quot;),
          plot.background=element_blank(),
          plot.margin = margin(2,2, 2, 4, &quot;cm&quot;))

anim &lt;- staticplot +
    transition_states(year, transition_length = 4, state_length = 1) +
    view_follow(fixed_x = TRUE) +
    labs(title = &#39;Foreign aid per year : {closest_state}&#39;,  
         subtitle  =  &quot;Top 5 Countries&quot;,
         caption  = &quot;Aid in millions USD | Data Source: AidData&quot;)

animate(anim, 200, fps = 7, end_pause = 10, renderer = gifski_renderer(&quot;animation.gif&quot;))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-1.gif" /><!-- --> #cite <a href="https://towardsdatascience.com/create-animated-bar-charts-using-r-31d09e5841da" class="uri">https://towardsdatascience.com/create-animated-bar-charts-using-r-31d09e5841da</a></p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
